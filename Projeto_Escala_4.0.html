<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Calendário 2026</title>
    <style>
        body { font-family: sans-serif; text-align: center; background: #ebebeb; margin: 0;}

        #divH1{
            display: flex;
            justify-content: center;
            align-items: center;
        }
        h1{
            color: #009043;
            margin: 20px;
        }
        button{
            padding: 5px 15px;
            border-radius: 5px;
            border: 1px solid #000;
            background-color: #e6ffef;
        }
        input{
            text-align: center;
            width: 100px;
        }
        .mes{
            background-color: #FFF;
            width: 280px;
            padding: 5px 5px 10px 5px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            margin: 0 auto;
        }
        .titulo-mes{
            padding: 10px 0;
            font-weight: bold;
            color: #00b353;
            font-size: 16pt;
        }
        .grid-7col{
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            place-items: center;
        }
        .grid-meses{
            display: flex;
            flex-wrap: wrap;
            /* grid-template-columns: repeat(3, 1fr); */
            gap: 20px;
            margin: auto;
            max-width: 950px;
            
        }
        .grid-dias{
            font-size: 12pt;
        }
        .box{
            width: 26px;
            height: 26px;
            border-radius: 13px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 2px 0;
            /* font-weight: bold; */
        }
        .box:hover{
            background-color: #EEE;
            cursor: pointer;
        }
        .dia-semana{font-weight: bold;color: #BBB;margin-bottom: 10px;font-size: 14pt;}
        .dayWork{background-color: #e6ffef;border: 1px solid #2fdd80;}
        .dayFree{background-color: #FFF;border: 1px solid #FFF;}
        .dayToDay{border: 2px solid #e5ff00;font-weight: bold;}
    </style>
</head>
<body>

    <input type="number" id="id-ano" placeholder="Ano" value=2026>
    <input type="number" id="dias-trabalho" placeholder="Dias de trabalho" value=3>
    <input type="number" id="dias-folga" placeholder="Dias de folga" value=6>
    <!-- <input type="date" id="dataBase" name="nascimento" value="2026-02-19" min="1920-01-01"> -->
    <br>
    <button onclick="atualizarCalendario()">GERAR</button>
    </br>
    
    <div id="divH1">
        <button onclick="changeYear('previous')"><<</button>
        <h1 id="h1">Calendário 2026</h1>
        <button onclick="changeYear('next')">>></button>
    </div>

    <h3 id="h3">(Escala 3x6)</h3>

    <div id="divCalendario" class="grid-meses"></div>

    <script>
        let dataBase = new Date(2026, 11, 15)
        let ano = dataBase.getFullYear()
        let diasTrabalho = 3
        let diasFolga = 6
        let escala = (diasTrabalho + diasFolga)

        //Setar o Marcador temporário para auxiliar 
        function getMarcadorDoMes(dataBase, primeiroDiaDoMes) {
            let marcador;
            let resto = Math.abs((Math.floor((dataBase - primeiroDiaDoMes)/(1000*60*60*24))) % (diasTrabalho + diasFolga))

            if(resto == 0){
                marcador = 1                
            }else if(dataBase >= primeiroDiaDoMes){
                marcador = ((diasTrabalho + diasFolga) - resto) + 1
            }else{
                marcador = resto + 1
            }
            
            return Math.abs(marcador)
        }

        //Identificar marcação da escala
        function getStatusDaDataNaEscala(marcadorDoMes, estaData) {
            let hoje = new Date()
            
            if(estaData.toDateString() == hoje.toDateString() && marcadorDoMes <= diasTrabalho){
                return "dayWork dayToDay"
            }
            if(estaData.toDateString() == hoje.toDateString() && marcadorDoMes > diasTrabalho){
                return "dayFree dayToDay"
            }
            if(marcadorDoMes <= diasTrabalho){
                return "dayWork"
            }
            if(marcadorDoMes > diasTrabalho){
                return "dayFree"
            }   
        }

        //Gerar mês
        function gerarHTMLdosDiasDoMes(ano, mes) {
            let dia01 = new Date(ano, mes, 1)
            let totalDiasDoMes = new Date(ano, mes+1, 0).getDate()
            let diaDaSemenaPrimeiroDia = dia01.getDay()
            let diasNulos = diaDaSemenaPrimeiroDia
            let marcador = getMarcadorDoMes(dataBase, dia01)
            
            let tempHtml = ""

            for (let index = 0; index < diasNulos; index++) {
                tempHtml += `<div></div>`
            }
            for (let dia = 1; dia <= (totalDiasDoMes); dia++) {
                let estaData = new Date(ano, mes, dia)
                let statusNaEscala = getStatusDaDataNaEscala(marcador, estaData)

                tempHtml += `<div class="box ${statusNaEscala}" data-date="${estaData}" onclick="atualizarCalendario('${estaData}')">${dia}</div>`

                marcador++

                if(marcador > (diasTrabalho + diasFolga)){
                    marcador = 1
                }
            }
            return tempHtml
        }
        
        //Montar mês no HTML
        function montarHTMLdoMes(ano, mes) {
            const nomeMeses = ['Janeiro', 'Fevereiro', 'Março', 'Abril','Maio', 'Junho', 'Julho', 'Agosto','Setembro', 'Outubro', 'Novembro', 'Dezembro']
            const diasSemana = ["D", "S", "T", "Q", "Q", "S", "S"];
            let semanaHtml = ""

            for (let i = 0; i < diasSemana.length; i++) {
                semanaHtml += `<div class="dia-semana">${diasSemana[i]}</div>`
            }

            let preHtml = `
                <div class="mes">
                    <div class="titulo-mes">${nomeMeses[mes]}</div>
                    <div class="grid-7col">${semanaHtml}</div>
                <div class="grid-7col grid-dias">
            `
            let posHtml = `</div></div>`

            return preHtml + gerarHTMLdosDiasDoMes(ano, mes) + posHtml
        }
    
        //gerar ano 2026
        function gerarCalendarioAnual(ano) {
            let h1 = document.getElementById('h1');
            const divCalendario = document.getElementById('divCalendario');

            h1.innerHTML = "Calendário " + ano
            divCalendario.innerHTML = ""

            for (let m = 0; m < 12; m++) {
                divCalendario.innerHTML += montarHTMLdoMes(ano, m)
            }   
        }

        function atualizarCalendario(date) {
            if(date){
                let dateSent = new Date(date)
                dataBase = new Date(dateSent.getFullYear(), dateSent.getMonth(), dateSent.getDate())
            }

            ano = Number(document.getElementById("id-ano").value)
            diasTrabalho = Number(document.getElementById("dias-trabalho").value)
            diasFolga = Number(document.getElementById("dias-folga").value)

            document.getElementById("h3").innerHTML = `(Escala ${diasTrabalho}x${diasFolga})`

            gerarCalendarioAnual(ano)
        }

        function changeYear(params) {
            if(params=="next"){
                document.getElementById("id-ano").value = Number(document.getElementById("id-ano").value) + 1
                ano = Number(document.getElementById("id-ano").value)
                gerarCalendarioAnual(ano)
            }else if(params=="previous"){
                document.getElementById("id-ano").value = Number(document.getElementById("id-ano").value) - 1
                ano = Number(document.getElementById("id-ano").value)
                gerarCalendarioAnual(ano)
            }
        }
        
        gerarCalendarioAnual(ano)        
    </script>
</body>
</html>
